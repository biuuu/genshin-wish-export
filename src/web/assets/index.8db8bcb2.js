import{r as e,o as a,c as t,u as l,w as o,a as s,E as n,b as r,F as u,d,e as c,f as i,_ as m,g as p,h as f,i as h,j as b,k as w,l as g,m as y,n as x,p as v}from"./vendor.1bca63b3.js";!function(e=".",a="__import__"){try{self[a]=new Function("u","return import(u)")}catch(t){const l=new URL(e,location),o=e=>{URL.revokeObjectURL(e.src),e.remove()};self[a]=e=>new Promise(((t,s)=>{const n=new URL(e,l);if(self[a].moduleMap[n])return t(self[a].moduleMap[n]);const r=new Blob([`import * as m from '${n}';`,`${a}.moduleMap['${n}']=m;`],{type:"text/javascript"}),u=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){s(new Error(`Failed to import: ${e}`)),o(u)},onload(){t(self[a].moduleMap[n]),o(u)}});document.head.appendChild(u)})),self[a].moduleMap={}}}("/assets/");const _={class:"mx-auto container flex flex-col items-center justify-center h-screen"},k=s("i",{class:"el-icon-upload"},null,-1),E=s("div",{class:"el-upload__text"},[c("将Excel文件拖到此处，或"),s("em",null,"点击上传")],-1),M=s("div",{class:"el-upload__tip"},[c(" 这里可以将抽卡记录工具导出的 Excel 转为 JSON 文件，"),s("br"),c("将 JSON 文件复制到工具目录下的 userData 文件夹里，"),s("br"),c("重新打开工具即可读取。 ")],-1),U=s("p",{class:"text-xs text-gray-500 mt-2 w-56"},[c("如果Excel有重复数据，可以通过选择一个较早的截止日期，来去除异常数据。"),s("br"),c("If Excel has duplicate data, you can remove the abnormal data by choosing an earlier End Date.")],-1),L=c("下载JSON"),j=s("a",{class:"my-8",href:"https://github.com/biuuu/genshin-wish-export"},[s("svg",{class:"octicon octicon-mark-github v-align-middle",height:"32",viewBox:"0 0 16 16",version:"1.1",width:"32","aria-hidden":"true"},[s("path",{"fill-rule":"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"})])],-1);const D=i({expose:[],setup(c){const i=e({form:{lang:"zh-cn",date:new Date},nameList:[],resultMap:null,loaded:!1}),m=["301","302","200","100"],p=new Map([["zh-cn","简体中文"],["zh-tw","繁體中文"],["de-de","Deutsch"],["en-us","English"],["es-es","Español"],["fr-fr","Français"],["id-id","Indonesia"],["ja-jp","日本語"],["ko-kr","한국어"],["pt-pt","Português"],["ru-ru","Pусский"],["th-th","ภาษาไทย"],["vi-vn","Tiếng Việt"]]),f=async e=>{const a=new n.Workbook,t=await(e=>new Promise(((a,t)=>{const l=new FileReader;l.onload=function(e){a(e.target.result)},l.onerror=t,l.readAsArrayBuffer(e)})))(e);await a.xlsx.load(t),i.loaded=!0;const l=new Map,o=[];a.worksheets.forEach(((e,a)=>{const t=[];o.push(e.name);for(let l=1;l<e._rows.length;l++)t.push(e._rows[l].values.slice(1,5));l.set(m[a],t)})),i.resultMap=l,i.nameList=o},h=()=>{if(!i.form.uid)return alert("必须要有UID");const e=new Map;m.forEach(((a,t)=>{e.set(a,i.nameList[t])}));const a=new Map,t=i.form.date?new Date(i.form.date):Date.now();for(let[o,s]of i.resultMap){const e=s.filter((e=>new Date(e[0]).getTime()<t));a.set(o,e)}const l={result:[...a],time:Date.now(),lang:i.form.lang,uid:`${i.form.uid}`,typeMap:[...e]};((e,a)=>{const t=document.createElement("a");t.download=a,t.style.display="none";const l=new Blob([e],{type:"text/csv"});t.href=URL.createObjectURL(l),document.body.appendChild(t),t.click(),document.body.removeChild(t)})(JSON.stringify(l,null,2),`gacha-list-${i.form.uid}.json`)};return(e,n)=>{const c=r("el-upload"),m=r("el-input-number"),b=r("el-form-item"),w=r("el-option"),g=r("el-select"),y=r("el-date-picker"),x=r("el-button"),v=r("el-form");return a(),t("div",_,[l(i).loaded?(a(),t(v,{key:1,model:l(i).form,class:"shadow border rounded border-gray-200 pt-8 pb-2 pr-8 bg-gray-50",size:"mini","label-width":"150px"},{default:o((()=>[s(b,{label:"UID"},{default:o((()=>[s(m,{class:"text-left",controls:!1,modelValue:l(i).form.uid,"onUpdate:modelValue":n[1]||(n[1]=e=>l(i).form.uid=e),min:1},null,8,["modelValue"])])),_:1}),s(b,{label:"语言(Language)"},{default:o((()=>[s(g,{modelValue:l(i).form.lang,"onUpdate:modelValue":n[2]||(n[2]=e=>l(i).form.lang=e),placeholder:"请选择"},{default:o((()=>[(a(!0),t(u,null,d(l(p),(([e,l])=>(a(),t(w,{key:e,label:l,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(b,{label:"截止日期(End Date)"},{default:o((()=>[s(y,{modelValue:l(i).form.date,"onUpdate:modelValue":n[3]||(n[3]=e=>l(i).form.date=e),type:"date",placeholder:"选择日期"},null,8,["modelValue"]),U])),_:1}),s(b,null,{default:o((()=>[s(x,{type:"primary",onClick:n[4]||(n[4]=e=>h())},{default:o((()=>[L])),_:1})])),_:1})])),_:1},8,["model"])):(a(),t(c,{key:0,"http-request":()=>null,"before-upload":f,drag:"",action:"/",accept:".xlsx"},{tip:o((()=>[M])),default:o((()=>[k,E])),_:1},8,["http-request"])),j])}}});D.use(m),D.use(p),D.use(f),D.use(h),D.use(b),D.use(w),D.use(g),D.use(y),D.use(x),D.use(v),D.mount("#app");
